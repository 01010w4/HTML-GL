<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>HTML GL demo</title>
</head>
<body>
<h1>HTML GL demo</h1>
<webgl>
    This layer is rendered in WebGL because it have tag name webgl
</webgl>
<button onclick="window.animate()">Animate WebGL layer</button>
<button onclick="window.changeNodeContent()">Change layer content</button>
<button onclick="window.changeNodeTransform()">Simply change layer style.transform</button>
<h2>
    TODO
</h2>
<ul>
    <li>Redefine element.style.transform property in order to pass it to webgl renderer</li>
    <li>Rerender only if content changed in order to decrease CPU/GPU load</li>
    <li>Add retina support in order to avoid blurry content</li>
</ul>
<script src="./js/vendor/velocity.js"></script>
<script src="./js/vendor/html2canvas.js"></script>
<script src="../bower_components/imagesloaded/imagesloaded.pkgd.js"></script>
<script src="../bower_components/pixi/bin/pixi.dev.js"></script>
<script src="../src/gl-element.js"></script>
<script src="../src/htmlgl.js"></script>
<script>
    window.changeNodeContent = function () {
        document.getElementsByTagName('webgl')[0].textContent = 'Animation was smooth, was not it? This is a new content. It is still visible in dev tools, affects HTML layout and is rendered via WebGL.';
    }

    window.changeNodeTransform = function () {
        var element = document.getElementsByTagName('webgl')[0];
        element.style.webkitTransform = 'scaleX(2) rotateZ(75deg) translateX(400px) translateY(100px)';
        element.style.transform = 'scaleY(2) rotateZ(75deg) translateX(400px) translateY(100px)';
    }

    window.animate = function () {
        var element = document.getElementsByTagName('webgl')[0];

        Velocity(element, {
            translateX: 100,
            translateY: 100,
            scaleX: 4,
            scaleY: 4,
            rotateZ: "360deg"
        }, {duration: 1000})
        .then(function () {
            Velocity(element, {
                translateX: 0,
                translateY: 0,
                scaleX: 1,
                scaleY: 1,
                rotateZ: "0"
            }, {duration: 1000});
        });
    }
</script>
</body>
</html>